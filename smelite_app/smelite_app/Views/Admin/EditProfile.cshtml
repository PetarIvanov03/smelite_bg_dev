@model smelite_app.ViewModels.Admin.EditAdminProfileViewModel

<div class="profile-card edit-profile-card">
    <h2 class="profile-title" style="margin-bottom:18px;">Редакция на профила</h2>

    <form asp-action="EditProfile" method="post" enctype="multipart/form-data" class="edit-profile-form">
        <div class="edit-form-group">
            <label asp-for="FirstName" class="profile-label"></label>
            <input asp-for="FirstName" maxlength="100" required class="filter-input" />
        </div>
        <div class="edit-form-group">
            <label asp-for="LastName" class="profile-label"></label>
            <input asp-for="LastName" maxlength="100" required class="filter-input" />
        </div>
        <div class="edit-form-group">
            <label asp-for="Email" class="profile-label"></label>
            <input asp-for="Email" type="email" required class="filter-input" />
        </div>
        <div class="edit-form-group">
            <label class="profile-label">Profile Image</label>
            <div id="drop-zone" class="profile-image-dropzone">
                <img id="preview" src="@Model.ProfileImageUrl" class="profile-img mb-2" style="max-height:140px;" />
                <p style="font-size:0.97rem;color:#8b8b8b;">Drag & drop image here или кликни за избор</p>
                <input type="file" asp-for="ProfileImage" class="form-control" style="display:none" id="fileInput" />
            </div>
        </div>
        <div class="edit-form-group">
            <label asp-for="CurrentPassword" class="profile-label"></label>
            <input asp-for="CurrentPassword" class="filter-input" />
        </div>
        <div class="edit-form-group">
            <label asp-for="NewPassword" class="profile-label"></label>
            <input asp-for="NewPassword" class="filter-input" />
        </div>
        <div class="edit-form-group">
            <label asp-for="ConfirmPassword" class="profile-label"></label>
            <input asp-for="ConfirmPassword" class="filter-input" />
        </div>
        <button type="submit" class="btn-main" style="margin-top:12px;width:100%;">Запази</button>
    </form>
</div>

@section Scripts {
    <script>
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('fileInput');
        const preview = document.getElementById('preview');

        dropZone.addEventListener('click', () => fileInput.click());
        dropZone.addEventListener('dragover', e => {
            e.preventDefault();
            dropZone.classList.add('bg-secondary');
        });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('bg-secondary'));
        dropZone.addEventListener('drop', e => {
            e.preventDefault();
            dropZone.classList.remove('bg-secondary');
            fileInput.files = e.dataTransfer.files;
            updatePreview();
        });
        fileInput.addEventListener('change', updatePreview);

        function updatePreview() {
            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = e => preview.src = e.target.result;
                reader.readAsDataURL(file);
            }
        }
    </script>
}
