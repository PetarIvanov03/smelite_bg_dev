@using System
@model IEnumerable<smelite_app.Models.Payment>

<h2>Orders</h2>
<table class="table">
<thead>
<tr>
    <th>Apprentice</th>
    <th>Master</th>
    <th>Total</th>
    <th>Fee</th>
    <th>To Master</th>
    <th>Paid On</th>
    <th>Method</th>
    <th>Transaction</th>
    <th>Status</th>
    <th></th>
</tr>
</thead>
<tbody>
@foreach (var p in Model)
{
    <tr>
        <td>@p.Apprenticeship.ApprenticeProfile.ApplicationUser.Email</td>
        <td>@p.Apprenticeship.MasterProfile.ApplicationUser.Email</td>
        <td>@p.AmountTotal</td>
        <td>@p.PlatformFee</td>
        <td>@p.AmountToRecipient</td>
        <td>@p.PaidOn.ToShortDateString()</td>
        <td>@p.Method</td>
        <td>@p.TransactionId</td>
        <td>@p.Status</td>
        <td>
            <form asp-action="SetPaymentStatus" method="post">
                <input type="hidden" name="id" value="@p.Id" />
                <select name="status" class="form-select">
                    @foreach (var s in Enum.GetNames(typeof(smelite_app.Enums.PaymentStatus)))
                    {
                        <option value="@s" selected="@(p.Status==s)">@s</option>
                    }
                </select>
                <button type="submit" class="btn btn-sm btn-primary">Update</button>
            </form>
        </td>
    </tr>
}
</tbody>
</table>
