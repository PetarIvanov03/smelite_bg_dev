@model IEnumerable<smelite_app.Models.Apprenticeship>
<h2 class="craft-title" style="text-align:center;margin-bottom:34px;">Всички чиракувания</h2>

<div class="crafts-table-wrap">
    <table class="crafts-table">
        <thead>
            <tr>
                <th>Чирак</th>
                <th>Майстор</th>
                <th>Занаят</th>
                <th>Локация</th>
                <th>Сесии</th>
                <th>Цена</th>
                <th>Статус</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var a in Model)
            {
                <tr>
                    <td>@a.ApprenticeProfile.ApplicationUser.Email</td>
                    <td>@a.MasterProfile.ApplicationUser.Email</td>
                    <td>@a.CraftOffering.Craft.Name</td>
                    <td>@a.CraftOffering.CraftLocation.Name</td>
                    <td>@a.CraftOffering.CraftPackage.SessionsCount</td>
                    <td>@($"{a.CraftOffering.Price:F2} EUR")</td>
                    <td>
                        <span class="appr-status-badge appr-status-@a.Status.ToString().ToLower()">
                            @a.Status
                        </span>
                    </td>
                    <td>
                        <form asp-action="SetApprenticeshipStatus" method="post" class="appr-status-form">
                            <input type="hidden" name="id" value="@a.Id" />
                            <select name="status" class="filter-select" style="min-width:80px;">
                                @foreach (var s in Enum.GetNames(typeof(smelite_app.Enums.ApprenticeshipStatus)))
                                {
                                    <option value="@s" selected="@(a.Status == s)">@s</option>
                                }
                            </select>
                            <button type="submit" class="btn-main-outline appr-btn">Запази</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
